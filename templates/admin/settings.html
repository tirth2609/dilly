{% extends "layout.html" %}

{% block title %}Settings - Admin Dashboard{% endblock %}

{% block extra_css %}
<style>
    .sidebar {
        height: calc(100vh - 75px);
        position: sticky;
        top: 75px;
    }
    
    .dashboard-content {
        min-height: calc(100vh - 75px);
    }
    
    .nav-pills .nav-link.active {
        background-color: var(--accent-color);
    }
    
    .settings-card {
        transition: transform 0.2s ease-in-out;
    }
    
    .settings-card:hover {
        transform: translateY(-5px);
    }
    
    .settings-icon {
        width: 50px;
        height: 50px;
        background-color: rgba(var(--bs-primary-rgb), 0.1);
        color: var(--accent-color);
        border-radius: 12px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        margin-bottom: 1rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="container-fluid py-4">
    <div class="row">
        <div class="col-lg-3 col-xl-2">
            <div class="sidebar bg-light p-3 rounded">
                <h5 class="mb-3">Admin Menu</h5>
                <div class="nav flex-column nav-pills">
                    <a class="nav-link" href="{{ url_for('admin_dashboard') }}">
                        <i class="fas fa-tachometer-alt me-2"></i> Dashboard
                    </a>
                    <a class="nav-link" href="{{ url_for('admin_menu_items') }}">
                        <i class="fas fa-utensils me-2"></i> Manage Menu
                    </a>
                    <a class="nav-link" href="{{ url_for('admin_categories') }}">
                        <i class="fas fa-tags me-2"></i> Categories
                    </a>
                    <a class="nav-link" href="{{ url_for('admin_reservations') }}">
                        <i class="fas fa-calendar-check me-2"></i> Reservations
                    </a>
                    <a class="nav-link" href="{{ url_for('admin_banquets') }}">
                        <i class="fas fa-glass-cheers me-2"></i> Banquet Bookings
                    </a>
                    <a class="nav-link" href="{{ url_for('admin_orders') }}">
                        <i class="fas fa-shopping-cart me-2"></i> Orders
                    </a>
                    <a class="nav-link" href="{{ url_for('admin_users') }}">
                        <i class="fas fa-users me-2"></i> Users
                    </a>
                    <a class="nav-link active" href="{{ url_for('admin_settings') }}">
                        <i class="fas fa-cog me-2"></i> Settings
                    </a>
                </div>
            </div>
        </div>
        <div class="col-lg-9 col-xl-10">
            <div class="dashboard-content">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h3 class="mb-0">Settings</h3>
                </div>
                
                <!-- Settings Navigation Cards -->
                <div class="row mb-4">
                    <div class="col-md-4 mb-4">
                        <div class="card border-0 shadow settings-card h-100">
                            <div class="card-body text-center p-4">
                                <div class="settings-icon mx-auto">
                                    <i class="fas fa-store"></i>
                                </div>
                                <h5>Restaurant Settings</h5>
                                <p class="text-muted">Manage restaurant details, hours, and general settings</p>
                                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#restaurantSettingsModal">
                                    Manage
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card border-0 shadow settings-card h-100">
                            <div class="card-body text-center p-4">
                                <div class="settings-icon mx-auto">
                                    <i class="fas fa-globe"></i>
                                </div>
                                <h5>Website Configuration</h5>
                                <p class="text-muted">Customize website appearance, SEO settings, and more</p>
                                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#websiteSettingsModal">
                                    Configure
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card border-0 shadow settings-card h-100">
                            <div class="card-body text-center p-4">
                                <div class="settings-icon mx-auto">
                                    <i class="fas fa-envelope"></i>
                                </div>
                                <h5>Notification Settings</h5>
                                <p class="text-muted">Configure email templates and notification preferences</p>
                                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#notificationSettingsModal">
                                    Configure
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card border-0 shadow settings-card h-100">
                            <div class="card-body text-center p-4">
                                <div class="settings-icon mx-auto">
                                    <i class="fas fa-credit-card"></i>
                                </div>
                                <h5>Payment Settings</h5>
                                <p class="text-muted">Manage payment gateways, currencies, and tax settings</p>
                                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#paymentSettingsModal">
                                    Configure
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card border-0 shadow settings-card h-100">
                            <div class="card-body text-center p-4">
                                <div class="settings-icon mx-auto">
                                    <i class="fas fa-calendar"></i>
                                </div>
                                <h5>Reservation Settings</h5>
                                <p class="text-muted">Configure reservation time slots, capacity, and policies</p>
                                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#reservationSettingsModal">
                                    Configure
                                </button>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-4 mb-4">
                        <div class="card border-0 shadow settings-card h-100">
                            <div class="card-body text-center p-4">
                                <div class="settings-icon mx-auto">
                                    <i class="fas fa-shield-alt"></i>
                                </div>
                                <h5>Security Settings</h5>
                                <p class="text-muted">Manage administrator access, backups, and security options</p>
                                <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#securitySettingsModal">
                                    Configure
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- System Status Card -->
                <div class="card border-0 shadow">
                    <div class="card-header bg-light">
                        <h5 class="card-title mb-0">System Status</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-6">
                                <h6>Database Status</h6>
                                <div class="d-flex align-items-center mb-3">
                                    <div class="me-3">
                                        <span class="badge rounded-pill bg-success">
                                            <i class="fas fa-check-circle"></i>
                                        </span>
                                    </div>
                                    <div>
                                        <p class="mb-0 d-flex justify-content-between">
                                            <span>Connection</span>
                                            <span class="text-success">Operational</span>
                                        </p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center mb-3">
                                    <div class="me-3">
                                        <span class="badge rounded-pill bg-success">
                                            <i class="fas fa-check-circle"></i>
                                        </span>
                                    </div>
                                    <div>
                                        <p class="mb-0 d-flex justify-content-between">
                                            <span>Latest Backup</span>
                                            <span class="text-muted">Today, 04:00 AM</span>
                                        </p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center mb-3">
                                    <div class="me-3">
                                        <span class="badge rounded-pill bg-success">
                                            <i class="fas fa-check-circle"></i>
                                        </span>
                                    </div>
                                    <div>
                                        <p class="mb-0 d-flex justify-content-between">
                                            <span>Database Size</span>
                                            <span class="text-muted">24.5 MB</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <h6>System Information</h6>
                                <div class="d-flex align-items-center mb-3">
                                    <div class="me-3">
                                        <span class="badge rounded-pill bg-success">
                                            <i class="fas fa-check-circle"></i>
                                        </span>
                                    </div>
                                    <div>
                                        <p class="mb-0 d-flex justify-content-between">
                                            <span>Server Status</span>
                                            <span class="text-success">Online</span>
                                        </p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center mb-3">
                                    <div class="me-3">
                                        <span class="badge rounded-pill bg-success">
                                            <i class="fas fa-check-circle"></i>
                                        </span>
                                    </div>
                                    <div>
                                        <p class="mb-0 d-flex justify-content-between">
                                            <span>Software Version</span>
                                            <span class="text-muted">1.0.0</span>
                                        </p>
                                    </div>
                                </div>
                                <div class="d-flex align-items-center mb-3">
                                    <div class="me-3">
                                        <span class="badge rounded-pill bg-warning">
                                            <i class="fas fa-exclamation-circle"></i>
                                        </span>
                                    </div>
                                    <div>
                                        <p class="mb-0 d-flex justify-content-between">
                                            <span>Updates Available</span>
                                            <span class="text-warning">Yes (1.0.1)</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="row mt-4">
                            <div class="col-md-12">
                                <h6>Web Server Status</h6>
                                <div class="progress mb-2" style="height: 10px;">
                                    <div class="progress-bar bg-success" role="progressbar" style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <div class="d-flex justify-content-between small">
                                    <span>Memory Usage: 25%</span>
                                    <span>512 MB / 2 GB</span>
                                </div>
                                <div class="progress mt-3 mb-2" style="height: 10px;">
                                    <div class="progress-bar bg-warning" role="progressbar" style="width: 65%;" aria-valuenow="65" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <div class="d-flex justify-content-between small">
                                    <span>CPU Usage: 65%</span>
                                    <span>Moderate Load</span>
                                </div>
                                <div class="progress mt-3 mb-2" style="height: 10px;">
                                    <div class="progress-bar bg-info" role="progressbar" style="width: 40%;" aria-valuenow="40" aria-valuemin="0" aria-valuemax="100"></div>
                                </div>
                                <div class="d-flex justify-content-between small">
                                    <span>Disk Usage: 40%</span>
                                    <span>4 GB / 10 GB</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-footer bg-white">
                        <div class="d-flex justify-content-between">
                            <button type="button" class="btn btn-outline-primary">
                                <i class="fas fa-sync-alt me-2"></i> Check for Updates
                            </button>
                            <button type="button" class="btn btn-outline-secondary">
                                <i class="fas fa-database me-2"></i> Backup Database
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Restaurant Settings Modal -->
<div class="modal fade" id="restaurantSettingsModal" tabindex="-1" aria-labelledby="restaurantSettingsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <form action="{{ url_for('admin_update_restaurant_settings') }}" method="POST">
                <div class="modal-header">
                    <h5 class="modal-title" id="restaurantSettingsModalLabel">Restaurant Settings</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs" id="restaurantSettingsTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="general-tab" data-bs-toggle="tab" data-bs-target="#general" type="button" role="tab">General</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="hours-tab" data-bs-toggle="tab" data-bs-target="#hours" type="button" role="tab">Operating Hours</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="contact-tab" data-bs-toggle="tab" data-bs-target="#contact" type="button" role="tab">Contact Info</button>
                        </li>
                    </ul>
                    <div class="tab-content p-3 border border-top-0 rounded-bottom" id="restaurantSettingsTabContent">
                        <div class="tab-pane fade show active" id="general" role="tabpanel" aria-labelledby="general-tab">
                            <div class="mb-3">
                                <label for="restaurant_name" class="form-label">Restaurant Name</label>
                                <input type="text" class="form-control" id="restaurant_name" name="restaurant_name" value="Dilly's Veg Kitchen" required>
                            </div>
                            <div class="mb-3">
                                <label for="restaurant_tagline" class="form-label">Tagline</label>
                                <input type="text" class="form-control" id="restaurant_tagline" name="restaurant_tagline" value="Delicious Vegetarian Cuisine">
                            </div>
                            <div class="mb-3">
                                <label for="restaurant_description" class="form-label">Description</label>
                                <textarea class="form-control" id="restaurant_description" name="restaurant_description" rows="3">At Dilly's Veg Kitchen, we believe in serving high-quality vegetarian food that doesn't compromise on taste or presentation. Our chefs carefully craft each dish using fresh, locally-sourced ingredients to create memorable dining experiences.</textarea>
                            </div>
                            <div class="mb-3">
                                <label for="cuisine_type" class="form-label">Cuisine Type</label>
                                <input type="text" class="form-control" id="cuisine_type" name="cuisine_type" value="Vegetarian, Indian, Continental">
                            </div>
                            <div class="mb-3">
                                <label for="establishment_year" class="form-label">Establishment Year</label>
                                <input type="number" class="form-control" id="establishment_year" name="establishment_year" value="2005">
                            </div>
                        </div>
                        <div class="tab-pane fade" id="hours" role="tabpanel" aria-labelledby="hours-tab">
                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <label class="form-label">Day</label>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Opening Time</label>
                                </div>
                                <div class="col-md-4">
                                    <label class="form-label">Closing Time</label>
                                </div>
                            </div>
                            {% for day in ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'] %}
                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <div class="form-check">
                                        <input class="form-check-input" type="checkbox" id="day_{{ day|lower }}" name="day_{{ day|lower }}" checked>
                                        <label class="form-check-label" for="day_{{ day|lower }}">{{ day }}</label>
                                    </div>
                                </div>
                                <div class="col-md-4">
                                    <input type="time" class="form-control" id="open_{{ day|lower }}" name="open_{{ day|lower }}" value="11:30">
                                </div>
                                <div class="col-md-4">
                                    <input type="time" class="form-control" id="close_{{ day|lower }}" name="close_{{ day|lower }}" value="23:00">
                                </div>
                            </div>
                            {% endfor %}
                            <div class="mb-3">
                                <label for="holiday_hours" class="form-label">Holiday Hours</label>
                                <input type="text" class="form-control" id="holiday_hours" name="holiday_hours" value="12:00 PM - 11:00 PM">
                            </div>
                        </div>
                        <div class="tab-pane fade" id="contact" role="tabpanel" aria-labelledby="contact-tab">
                            <div class="mb-3">
                                <label for="address_line1" class="form-label">Address Line 1</label>
                                <input type="text" class="form-control" id="address_line1" name="address_line1" value="123 Food Street">
                            </div>
                            <div class="mb-3">
                                <label for="address_line2" class="form-label">Address Line 2</label>
                                <input type="text" class="form-control" id="address_line2" name="address_line2" value="Vegetarian Plaza">
                            </div>
                            <div class="row mb-3">
                                <div class="col-md-4">
                                    <label for="city" class="form-label">City</label>
                                    <input type="text" class="form-control" id="city" name="city" value="Bangalore">
                                </div>
                                <div class="col-md-4">
                                    <label for="state" class="form-label">State</label>
                                    <input type="text" class="form-control" id="state" name="state" value="Karnataka">
                                </div>
                                <div class="col-md-4">
                                    <label for="postal_code" class="form-label">Postal Code</label>
                                    <input type="text" class="form-control" id="postal_code" name="postal_code" value="560001">
                                </div>
                            </div>
                            <div class="mb-3">
                                <label for="phone" class="form-label">Phone Number</label>
                                <input type="text" class="form-control" id="phone" name="phone" value="+91 9876543210">
                            </div>
                            <div class="mb-3">
                                <label for="email" class="form-label">Email</label>
                                <input type="email" class="form-control" id="email" name="email" value="info@dillysvegkitchen.com">
                            </div>
                            <div class="mb-3">
                                <label for="google_maps_link" class="form-label">Google Maps Link</label>
                                <input type="text" class="form-control" id="google_maps_link" name="google_maps_link" value="https://maps.google.com/?q=Bangalore+Karnataka">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Website Settings Modal -->
<div class="modal fade" id="websiteSettingsModal" tabindex="-1" aria-labelledby="websiteSettingsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <form action="{{ url_for('admin_update_website_settings') }}" method="POST" enctype="multipart/form-data">
                <div class="modal-header">
                    <h5 class="modal-title" id="websiteSettingsModalLabel">Website Configuration</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs" id="websiteSettingsTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="appearance-tab" data-bs-toggle="tab" data-bs-target="#appearance" type="button" role="tab">Appearance</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="seo-tab" data-bs-toggle="tab" data-bs-target="#seo" type="button" role="tab">SEO</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="social-tab" data-bs-toggle="tab" data-bs-target="#social" type="button" role="tab">Social Media</button>
                        </li>
                    </ul>
                    <div class="tab-content p-3 border border-top-0 rounded-bottom" id="websiteSettingsTabContent">
                        <div class="tab-pane fade show active" id="appearance" role="tabpanel" aria-labelledby="appearance-tab">
                            <div class="mb-3">
                                <label for="logo" class="form-label">Logo</label>
                                <input type="file" class="form-control" id="logo" name="logo" accept="image/*">
                                <small class="text-muted">Current logo: logo.svg</small>
                            </div>
                            <div class="mb-3">
                                <label for="favicon" class="form-label">Favicon</label>
                                <input type="file" class="form-control" id="favicon" name="favicon" accept="image/*">
                                <small class="text-muted">Current favicon: favicon.ico</small>
                            </div>
                            <div class="mb-3">
                                <label for="primary_color" class="form-label">Primary Color</label>
                                <input type="color" class="form-control form-control-color" id="primary_color" name="primary_color" value="#8B4513">
                            </div>
                            <div class="mb-3">
                                <label for="secondary_color" class="form-label">Secondary Color</label>
                                <input type="color" class="form-control form-control-color" id="secondary_color" name="secondary_color" value="#6B8E23">
                            </div>
                            <div class="mb-3">
                                <label for="accent_color" class="form-label">Accent Color</label>
                                <input type="color" class="form-control form-control-color" id="accent_color" name="accent_color" value="#FF8C00">
                            </div>
                            <div class="mb-3">
                                <label for="font_family" class="form-label">Font Family</label>
                                <select class="form-select" id="font_family" name="font_family">
                                    <option value="Poppins" selected>Poppins</option>
                                    <option value="Roboto">Roboto</option>
                                    <option value="Open Sans">Open Sans</option>
                                    <option value="Montserrat">Montserrat</option>
                                    <option value="Lato">Lato</option>
                                </select>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="seo" role="tabpanel" aria-labelledby="seo-tab">
                            <div class="mb-3">
                                <label for="meta_title" class="form-label">Meta Title</label>
                                <input type="text" class="form-control" id="meta_title" name="meta_title" value="Dilly's Veg Kitchen - Delicious Vegetarian Cuisine in Bangalore">
                            </div>
                            <div class="mb-3">
                                <label for="meta_description" class="form-label">Meta Description</label>
                                <textarea class="form-control" id="meta_description" name="meta_description" rows="2">Experience the finest vegetarian dishes at Dilly's Veg Kitchen in Bangalore. Fresh ingredients, authentic flavors, and a warm atmosphere await you.</textarea>
                            </div>
                            <div class="mb-3">
                                <label for="meta_keywords" class="form-label">Meta Keywords</label>
                                <input type="text" class="form-control" id="meta_keywords" name="meta_keywords" value="vegetarian restaurant, veg restaurant bangalore, dilly's veg kitchen, indian vegetarian food">
                            </div>
                            <div class="mb-3">
                                <label for="google_analytics" class="form-label">Google Analytics Tracking ID</label>
                                <input type="text" class="form-control" id="google_analytics" name="google_analytics" value="UA-XXXXXXXXX-X">
                            </div>
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="sitemap_enabled" name="sitemap_enabled" checked>
                                    <label class="form-check-label" for="sitemap_enabled">
                                        Generate Sitemap
                                    </label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="robots_txt_enabled" name="robots_txt_enabled" checked>
                                    <label class="form-check-label" for="robots_txt_enabled">
                                        Generate robots.txt
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="social" role="tabpanel" aria-labelledby="social-tab">
                            <div class="mb-3">
                                <label for="facebook_url" class="form-label">Facebook Page URL</label>
                                <input type="text" class="form-control" id="facebook_url" name="facebook_url" value="https://facebook.com/dillysvegkitchen">
                            </div>
                            <div class="mb-3">
                                <label for="instagram_url" class="form-label">Instagram Profile URL</label>
                                <input type="text" class="form-control" id="instagram_url" name="instagram_url" value="https://instagram.com/dillysvegkitchen">
                            </div>
                            <div class="mb-3">
                                <label for="twitter_url" class="form-label">Twitter Profile URL</label>
                                <input type="text" class="form-control" id="twitter_url" name="twitter_url" value="https://twitter.com/dillysvegkitchen">
                            </div>
                            <div class="mb-3">
                                <label for="youtube_url" class="form-label">YouTube Channel URL</label>
                                <input type="text" class="form-control" id="youtube_url" name="youtube_url" value="https://youtube.com/dillysvegkitchen">
                            </div>
                            <div class="mb-3">
                                <label for="og_image" class="form-label">Social Media Share Image</label>
                                <input type="file" class="form-control" id="og_image" name="og_image" accept="image/*">
                                <small class="text-muted">Recommended size: 1200x630 pixels</small>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Notification Settings Modal -->
<div class="modal fade" id="notificationSettingsModal" tabindex="-1" aria-labelledby="notificationSettingsModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <form action="{{ url_for('admin_update_notification_settings') }}" method="POST">
                <div class="modal-header">
                    <h5 class="modal-title" id="notificationSettingsModalLabel">Notification Settings</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <ul class="nav nav-tabs" id="notificationSettingsTabs" role="tablist">
                        <li class="nav-item" role="presentation">
                            <button class="nav-link active" id="email-tab" data-bs-toggle="tab" data-bs-target="#email" type="button" role="tab">Email Notifications</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="sms-tab" data-bs-toggle="tab" data-bs-target="#sms" type="button" role="tab">SMS Notifications</button>
                        </li>
                        <li class="nav-item" role="presentation">
                            <button class="nav-link" id="templates-tab" data-bs-toggle="tab" data-bs-target="#templates" type="button" role="tab">Email Templates</button>
                        </li>
                    </ul>
                    <div class="tab-content p-3 border border-top-0 rounded-bottom" id="notificationSettingsTabContent">
                        <div class="tab-pane fade show active" id="email" role="tabpanel" aria-labelledby="email-tab">
                            <div class="mb-3">
                                <h6>Admin Notifications</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="admin_new_order" name="admin_new_order" checked>
                                    <label class="form-check-label" for="admin_new_order">
                                        New Order Placed
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="admin_new_reservation" name="admin_new_reservation" checked>
                                    <label class="form-check-label" for="admin_new_reservation">
                                        New Reservation Made
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="admin_new_user" name="admin_new_user" checked>
                                    <label class="form-check-label" for="admin_new_user">
                                        New User Registration
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="admin_new_banquet" name="admin_new_banquet" checked>
                                    <label class="form-check-label" for="admin_new_banquet">
                                        New Banquet Booking
                                    </label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <h6>Customer Notifications</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="customer_order_confirmation" name="customer_order_confirmation" checked>
                                    <label class="form-check-label" for="customer_order_confirmation">
                                        Order Confirmation
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="customer_order_update" name="customer_order_update" checked>
                                    <label class="form-check-label" for="customer_order_update">
                                        Order Status Updates
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="customer_reservation_confirmation" name="customer_reservation_confirmation" checked>
                                    <label class="form-check-label" for="customer_reservation_confirmation">
                                        Reservation Confirmation
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="customer_reservation_reminder" name="customer_reservation_reminder" checked>
                                    <label class="form-check-label" for="customer_reservation_reminder">
                                        Reservation Reminder (24 hours before)
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="customer_welcome" name="customer_welcome" checked>
                                    <label class="form-check-label" for="customer_welcome">
                                        Welcome Email on Registration
                                    </label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <h6>Email Configuration</h6>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="smtp_host" class="form-label">SMTP Host</label>
                                        <input type="text" class="form-control" id="smtp_host" name="smtp_host" value="smtp.example.com">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="smtp_port" class="form-label">SMTP Port</label>
                                        <input type="number" class="form-control" id="smtp_port" name="smtp_port" value="587">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="smtp_username" class="form-label">SMTP Username</label>
                                        <input type="text" class="form-control" id="smtp_username" name="smtp_username" value="info@dillysvegkitchen.com">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="smtp_password" class="form-label">SMTP Password</label>
                                        <input type="password" class="form-control" id="smtp_password" name="smtp_password" value="********">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="sender_email" class="form-label">Sender Email</label>
                                    <input type="email" class="form-control" id="sender_email" name="sender_email" value="noreply@dillysvegkitchen.com">
                                </div>
                                <div class="mb-3">
                                    <label for="sender_name" class="form-label">Sender Name</label>
                                    <input type="text" class="form-control" id="sender_name" name="sender_name" value="Dilly's Veg Kitchen">
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="sms" role="tabpanel" aria-labelledby="sms-tab">
                            <div class="mb-3">
                                <div class="form-check form-switch">
                                    <input class="form-check-input" type="checkbox" id="sms_enabled" name="sms_enabled" checked>
                                    <label class="form-check-label" for="sms_enabled">Enable SMS Notifications</label>
                                </div>
                            </div>
                            <div class="mb-3">
                                <h6>SMS Provider Settings</h6>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="sms_provider" class="form-label">Provider</label>
                                        <select class="form-select" id="sms_provider" name="sms_provider">
                                            <option value="twilio" selected>Twilio</option>
                                            <option value="textlocal">TextLocal</option>
                                            <option value="msg91">MSG91</option>
                                        </select>
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="sms_api_key" class="form-label">API Key</label>
                                        <input type="password" class="form-control" id="sms_api_key" name="sms_api_key" value="********">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="sms_sender_id" class="form-label">Sender ID</label>
                                        <input type="text" class="form-control" id="sms_sender_id" name="sms_sender_id" value="DILLYS">
                                    </div>
                                </div>
                            </div>
                            <div class="mb-3">
                                <h6>SMS Notification Types</h6>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="sms_order_confirmation" name="sms_order_confirmation" checked>
                                    <label class="form-check-label" for="sms_order_confirmation">
                                        Order Confirmation
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="sms_order_ready" name="sms_order_ready" checked>
                                    <label class="form-check-label" for="sms_order_ready">
                                        Order Ready for Pickup
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="sms_reservation_confirmation" name="sms_reservation_confirmation" checked>
                                    <label class="form-check-label" for="sms_reservation_confirmation">
                                        Reservation Confirmation
                                    </label>
                                </div>
                                <div class="form-check mb-2">
                                    <input class="form-check-input" type="checkbox" id="sms_reservation_reminder" name="sms_reservation_reminder" checked>
                                    <label class="form-check-label" for="sms_reservation_reminder">
                                        Reservation Reminder (3 hours before)
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="templates" role="tabpanel" aria-labelledby="templates-tab">
                            <div class="mb-3">
                                <label for="template_select" class="form-label">Select Template</label>
                                <select class="form-select" id="template_select">
                                    <option value="order_confirmation">Order Confirmation</option>
                                    <option value="reservation_confirmation">Reservation Confirmation</option>
                                    <option value="welcome_email">Welcome Email</option>
                                    <option value="password_reset">Password Reset</option>
                                    <option value="banquet_booking">Banquet Booking Confirmation</option>
                                </select>
                            </div>
                            <div class="mb-3">
                                <label for="email_subject" class="form-label">Email Subject</label>
                                <input type="text" class="form-control" id="email_subject" name="email_subject" value="Your Order Confirmation - Dilly's Veg Kitchen">
                            </div>
                            <div class="mb-3">
                                <label for="email_template" class="form-label">Email Template</label>
                                <textarea class="form-control" id="email_template" name="email_template" rows="10" style="font-family: monospace;">
<!DOCTYPE html>
<html>
<head>
    <title>Order Confirmation</title>
</head>
<body>
    <h1>Thank you for your order!</h1>
    <p>Dear {{customer_name}},</p>
    <p>Your order #{{order_id}} has been confirmed and is being prepared.</p>
    
    <h3>Order Summary:</h3>
    <table>
        <tr>
            <th>Item</th>
            <th>Quantity</th>
            <th>Price</th>
        </tr>
        {{#each items}}
        <tr>
            <td>{{name}}</td>
            <td>{{quantity}}</td>
            <td>₹{{price}}</td>
        </tr>
        {{/each}}
        <tr>
            <td colspan="2"><strong>Total</strong></td>
            <td><strong>₹{{total}}</strong></td>
        </tr>
    </table>
    
    <p>Estimated {{delivery_or_pickup_time}}: {{time}}</p>
    
    <p>Thank you for choosing Dilly's Veg Kitchen!</p>
    <p>Regards,<br>Team Dilly's</p>
</body>
</html>
                                </textarea>
                            </div>
                            <div class="alert alert-info">
                                <i class="fas fa-info-circle me-2"></i>
                                Template variables are enclosed in double curly braces, e.g., <code>{{customer_name}}</code>. Use <code>{{#each items}}</code> for loops.
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-primary">Save Changes</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Other modals would be similar, but for brevity, they are omitted here -->
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize Bootstrap tabs
        document.querySelectorAll('.nav-tabs button').forEach(button => {
            button.addEventListener('click', function(event) {
                event.preventDefault();
                this.classList.add('active');
            });
        });
        
        // Email template selection
        const templateSelect = document.getElementById('template_select');
        const emailSubject = document.getElementById('email_subject');
        const emailTemplate = document.getElementById('email_template');
        
        templateSelect.addEventListener('change', function() {
            // In a real app, this would make an AJAX call to get the template
            // For now, we'll just update with some examples
            switch(this.value) {
                case 'order_confirmation':
                    emailSubject.value = 'Your Order Confirmation - Dilly\'s Veg Kitchen';
                    emailTemplate.value = `<!DOCTYPE html>
<html>
<head>
    <title>Order Confirmation</title>
</head>
<body>
    <h1>Thank you for your order!</h1>
    <p>Dear {{customer_name}},</p>
    <p>Your order #{{order_id}} has been confirmed and is being prepared.</p>
    
    <h3>Order Summary:</h3>
    <table>
        <tr>
            <th>Item</th>
            <th>Quantity</th>
            <th>Price</th>
        </tr>
        {{#each items}}
        <tr>
            <td>{{name}}</td>
            <td>{{quantity}}</td>
            <td>₹{{price}}</td>
        </tr>
        {{/each}}
        <tr>
            <td colspan="2"><strong>Total</strong></td>
            <td><strong>₹{{total}}</strong></td>
        </tr>
    </table>
    
    <p>Estimated {{delivery_or_pickup_time}}: {{time}}</p>
    
    <p>Thank you for choosing Dilly's Veg Kitchen!</p>
    <p>Regards,<br>Team Dilly's</p>
</body>
</html>`;
                    break;
                case 'reservation_confirmation':
                    emailSubject.value = 'Your Reservation is Confirmed - Dilly\'s Veg Kitchen';
                    emailTemplate.value = `<!DOCTYPE html>
<html>
<head>
    <title>Reservation Confirmation</title>
</head>
<body>
    <h1>Your Reservation is Confirmed!</h1>
    <p>Dear {{customer_name}},</p>
    <p>Your reservation at Dilly's Veg Kitchen has been confirmed.</p>
    
    <h3>Reservation Details:</h3>
    <p><strong>Date:</strong> {{reservation_date}}</p>
    <p><strong>Time:</strong> {{reservation_time}}</p>
    <p><strong>Number of Guests:</strong> {{guest_count}}</p>
    
    <p>We look forward to serving you!</p>
    <p>Regards,<br>Team Dilly's</p>
</body>
</html>`;
                    break;
                case 'welcome_email':
                    emailSubject.value = 'Welcome to Dilly\'s Veg Kitchen';
                    emailTemplate.value = `<!DOCTYPE html>
<html>
<head>
    <title>Welcome to Dilly's Veg Kitchen</title>
</head>
<body>
    <h1>Welcome to Dilly's Veg Kitchen!</h1>
    <p>Dear {{customer_name}},</p>
    <p>Thank you for joining Dilly's Veg Kitchen. We're excited to have you as part of our vegetarian food community!</p>
    
    <p>With your account, you can:</p>
    <ul>
        <li>Place orders for takeaway or delivery</li>
        <li>Make table reservations</li>
        <li>Book our banquet hall for special events</li>
        <li>Save your favorite dishes</li>
    </ul>
    
    <p>We look forward to serving you!</p>
    <p>Regards,<br>Team Dilly's</p>
</body>
</html>`;
                    break;
                // Add more templates as needed
            }
        });
    });
</script>
{% endblock %}